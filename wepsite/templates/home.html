{% extends "base.html" %}

<!-- Include page-specific CSS -->
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/homepage.css') }}">
{% endblock %}

{% block content %}
<!-- Hero section with title and subtitle -->
<section class="homepage-hero">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="hero-content">
                    <h1 class="hero-title">Find Your Perfect Companion üêæ</h1>
                    <p class="hero-subtitle">Discover loving cats waiting for their forever homes</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main content area: pet listings and sidebar controls -->
<section class="main-section">
    <div class="container">
        <!-- Decorative floating icons -->
        <div class="floating-element">üê±</div>
        <div class="floating-element">üè†</div>
        <div class="floating-element">‚ù§Ô∏è</div>
        
        <div class="row">
            <div class="col-md-8">
                <div class="pets-section">
                    <!-- Section title changes if a city is selected -->
                    <h2 class="section-title">
                        {% if selected_city %}
                            Pets Available for Adoption in <span class="city-highlight">{{ selected_city }}</span>
                        {% else %}
                            Available Pets for Adoption
                        {% endif %}
                    </h2>

                    <!-- Grid of pet cards -->
                    <div class="pets-grid">
                        {% for pet in pets %}
                        <!-- Single pet card wrapper -->
                        <div class="pet-card-wrapper">
                            <div class="pet-card">
                                <!-- Link to pet detail page -->
                                <a href="{{ url_for('views.pet_detail', pet_id=pet.id) }}" class="pet-link">
                                    
                                    {% if pet.is_adopted %}
                                        <!-- Visual overlay and label for adopted pets -->
                                        <div class="adopted-overlay"></div>
                                        <div class="adopted-label">ADOPTED ‚úì</div>
                                    {% endif %}
                                    
                                    <!-- Pet image -->
                                    <div class="pet-image-container">
                                        <img src="{{ url_for('static', filename='uploads/' + pet.image_filename) }}" 
                                             class="pet-image" 
                                             alt="{{ pet.name }}">
                                    </div>
                                    <!-- Basic pet info -->
                                    <div class="pet-info">
                                        <h3 class="pet-name">{{ pet.name }}</h3>
                                        <p class="pet-details">{{ pet.breed }} ‚Ä¢ {{ pet.age }} years</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    
                    <!-- Fallback when no pets are available -->
                    {% if not pets %}
                    <div class="no-pets-message">
                        <div class="no-pets-icon">üê±</div>
                        <h3>No pets found</h3>
                        <p>Try selecting a different city or check back later for new arrivals!</p>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="filter-container">
                    <div class="filter-card">
                        <h5 class="filter-title">üìç Select Your Location</h5>
                        <!-- Location filter form -->
                        <form method="GET" action="{{ url_for('views.home') }}">
                            <div class="form-group">
                                <select class="form-control location-select" name="city">
                                    <option value="">All Cities</option>
                                    <!-- Loop over available cities -->
                                    {% for id, name in city_map.items() %}
                                        <option value="{{ id }}" 
                                            {% if request.args.get('city') == id %}selected{% endif %}>
                                            {{ name }}
                                        </option>
                                    {% endfor %}
                                </select>
                            </div>
                            <button type="submit" class="search-btn">üîç Search Pets</button>
                        </form>
                    </div>
                    
                    <!-- Quick stats about listed pets -->
                    <div class="stats-card">
                        <h6 class="stats-title">Quick Stats</h6>
                        <div class="stat-item">
                            <span class="stat-number">{{ pets|length }}</span>
                            <span class="stat-label">Pets Listed</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}